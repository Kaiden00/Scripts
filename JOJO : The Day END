if not game:IsLoaded() then game.Loaded:Wait() end

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/wally-rblx/uwuware-ui/main/main.lua"))()
local Maid = loadstring(game:HttpGet("https://raw.githubusercontent.com/Quenty/NevermoreEngine/version2/Modules/Shared/Events/Maid.lua"))()

local Client = game:GetService("Players").LocalPlayer 
local LootFolder = workspace.Loot

local Window = Library:CreateWindow("JOJO: The Day")
local MainFolder = Window:AddFolder("Main")
local CreditsFolder = Window:AddFolder("Credits")

local MainMaid = Maid.new()

local function OnChildAdded(Object)
    if not Library.flags.Itemfarm then return end

    local Character = Client.Character
    if not Character then return end

    local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

    local ProximityPrompt = Object:WaitForChild("ProximityPrompt", 5)
    if not ProximityPrompt then return end
    
    repeat task.wait() 
        HumanoidRootPart.CFrame = Object.CFrame
        fireproximityprompt(ProximityPrompt)
    until not Object.Parent or not Character.Parent or not Library.flags.Itemfarm
end

local function StoreItems()
    if not Library.flags.Autostore then return end
    task.wait()
    
    for _, Object in ipairs(Client.Backpack:GetChildren()) do
        Object.Parent = Client.Character
    end

    for _, Object in ipairs(Client.Character:GetChildren()) do
        task.spawn(function()
            game:GetService("ReplicatedStorage").RequestStore:InvokeServer()
        end)
    end
end

local function OnCharacterAdded(Character)
    MainMaid:DoCleaning()

    MainMaid:GiveTask(LootFolder.ChildAdded:Connect(OnChildAdded))
    MainMaid:GiveTask(Client.Backpack.ChildAdded:Connect(StoreItems))
    MainMaid:GiveTask(Character.ChildAdded:Connect(StoreItems)) --who gives a shit
end

task.spawn(function()
    OnCharacterAdded(Client.Character or Client.CharacterAdded:Wait())
end)

Client.CharacterAdded:Connect(OnCharacterAdded)

MainFolder:AddToggle({text = "Item farm", flag = "Itemfarm", callback = function()
    for _, Object in ipairs(LootFolder:GetChildren()) do
        OnChildAdded(Object)
    end
end})

MainFolder:AddToggle({text = "Auto store", flag = "Autostore", callback = function()
    StoreItems()
end})

CreditsFolder:AddLabel({text = "Script: Kaiden"})
CreditsFolder:AddLabel({text = "UI Library: Jan"})
Window:AddBind({text = "Menu toggle", key = Enum.KeyCode.End, callback = function() Library:Close() end})
Library:Init()

warn("Script loaded!")
